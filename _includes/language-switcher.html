<!-- Language Switcher for jekyll-polyglot -->
<div class="language-switcher" style="margin: 1rem 0; padding: 0.5rem; text-align: center; border-bottom: 1px solid var(--main-border-color);">
  {% if site.languages.size > 1 %}
    {% assign current_lang = site.active_lang | default: site.default_lang %}

    {% for lang in site.languages %}
      {% if lang == current_lang %}
        <span style="font-weight: bold; color: var(--heading-color); margin: 0 0.5rem; font-size: 0.9rem;">
          {% if lang == 'en' %}EN{% endif %}
          {% if lang == 'fr' %}FR{% endif %}
        </span>
      {% else %}
        {% capture lang_url %}
          {% if lang == site.default_lang %}
            {{ page.url | remove_first: '/fr' }}
          {% else %}
            {% if page.url contains '/fr/' %}
              {{ page.url }}
            {% else %}
              /{{ lang }}{{ page.url }}
            {% endif %}
          {% endif %}
        {% endcapture %}

        <a href="{{ lang_url | strip }}"
           style="margin: 0 0.5rem; color: var(--link-color); text-decoration: none; font-size: 0.9rem;">
          {% if lang == 'en' %}EN{% endif %}
          {% if lang == 'fr' %}FR{% endif %}
        </a>
      {% endif %}

      {% unless forloop.last %}
        <span style="color: var(--text-muted);">|</span>
      {% endunless %}
    {% endfor %}
  {% endif %}
</div>
